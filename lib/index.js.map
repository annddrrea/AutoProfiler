{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\nconst application_1 = require(\"@jupyterlab/application\");\nconst notebook_1 = require(\"@jupyterlab/notebook\");\nconst widgets_1 = require(\"@lumino/widgets\");\nrequire(\"../style/index.css\");\nconst notebook_2 = require(\"./jupyter-hooks/notebook\");\nconst App_svelte_1 = tslib_1.__importDefault(require(\"./components/App.svelte\"));\n/**\n * Initialization data for the codegen extension.\n */\nconst extension = {\n    id: 'AutoProfile',\n    autoStart: true,\n    activate: (app, layout, notebookTracker) => {\n        /*\n         * This makes us a side panel UI to display our\n         * extension's view. Note this is purely optional: your extension\n         * doesn't actually need any panel view to run.\n         */\n        const myUI = buildUI(app, layout);\n        notebookTracker.currentChanged.connect((_, widget) => {\n            const notebook = new notebook_2.NotebookAPI(widget);\n            notebook.ready.then(() => {\n                console.log('ITS ALIVE', notebook);\n                renderUI(myUI, { notebook, variables: null });\n                notebook.changed.connect(async () => {\n                    // let variables = await notebook.kernel.getEnv();\n                    let dfMap = await notebook.kernel.getDataFramesWithColumns();\n                    renderUI(myUI, { notebook, dfMap });\n                });\n            });\n        });\n    },\n    requires: [application_1.ILayoutRestorer, notebook_1.INotebookTracker]\n};\nfunction buildUI(app, layout) {\n    /*\n  \n    TODO rewrite this to svelte and get rid of lumino, see https://github.com/mkery/Verdant/blob/master/verdant/index.ts\n    \n    */\n    const myView = new widgets_1.Widget(); // can replace this stuff\n    const sidePanel = new widgets_1.StackedPanel();\n    sidePanel.id = 'myApp';\n    sidePanel.title.iconClass = 'myIcon jp-SideBar-tabIcon';\n    sidePanel.title.caption = 'AutoProfile';\n    sidePanel.addWidget(myView);\n    // add side panel view to JupyterLab\n    layout.add(sidePanel, 'v-VerdantPanel');\n    app.shell.add(sidePanel, 'left');\n    renderUI(myView);\n    return myView;\n}\nfunction renderUI(widget, props = {}) {\n    console.log(\"Rendering panel view...\");\n    // now render the panel view\n    const ui = new App_svelte_1.default({\n        target: widget.node,\n        props\n    });\n    // widget.node = ui; // i dont think this is gonna work...\n    return ui;\n}\nexports.default = extension;\n"],"names":["Object","defineProperty","exports","value","tslib_1","require","application_1","notebook_1","widgets_1","notebook_2","App_svelte_1","__importDefault","extension","id","autoStart","activate","app","layout","notebookTracker","myUI","myView","Widget","sidePanel","StackedPanel","title","iconClass","caption","addWidget","add","shell","renderUI","buildUI","currentChanged","connect","_","widget","notebook","NotebookAPI","ready","then","console","log","variables","changed","async","dfMap","kernel","getDataFramesWithColumns","requires","ILayoutRestorer","INotebookTracker","props","default","target","node"],"mappings":"yBACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtD,MAAMC,EAAUC,QAAQ,SAClBC,EAAgBD,QAAQ,2BACxBE,EAAaF,QAAQ,wBACrBG,EAAYH,QAAQ,mBAC1BA,QAAQ,sBACR,MAAMI,EAAaJ,QAAQ,4BACrBK,EAAeN,EAAQO,gBAAgBN,QAAQ,4BAI/CO,EAAY,CACdC,GAAI,cACJC,WAAW,EACXC,SAAU,CAACC,EAAKC,EAAQC,KAMpB,MAAMC,EAgBd,SAAiBH,EAAKC,GAMlB,MAAMG,EAAS,IAAIZ,EAAUa,OACvBC,EAAY,IAAId,EAAUe,aAShC,OARAD,EAAUT,GAAK,QACfS,EAAUE,MAAMC,UAAY,4BAC5BH,EAAUE,MAAME,QAAU,cAC1BJ,EAAUK,UAAUP,GAEpBH,EAAOW,IAAIN,EAAW,kBACtBN,EAAIa,MAAMD,IAAIN,EAAW,QACzBQ,EAASV,GACFA,EAhCUW,CAAQf,EAAKC,GAC1BC,EAAgBc,eAAeC,SAAQ,CAACC,EAAGC,KACvC,MAAMC,EAAW,IAAI3B,EAAW4B,YAAYF,GAC5CC,EAASE,MAAMC,MAAK,KAChBC,QAAQC,IAAI,YAAaL,GACzBN,EAASX,EAAM,CAAEiB,SAAAA,EAAUM,UAAW,OACtCN,EAASO,QAAQV,SAAQW,UAErB,IAAIC,QAAcT,EAASU,OAAOC,2BAClCjB,EAASX,EAAM,CAAEiB,SAAAA,EAAUS,MAAAA,cAK3CG,SAAU,CAAC1C,EAAc2C,gBAAiB1C,EAAW2C,mBAoBzD,SAASpB,EAASK,EAAQgB,EAAQ,IAC9BX,QAAQC,IAAI,2BAOZ,OALW,IAAI/B,EAAa0C,QAAQ,CAChCC,OAAQlB,EAAOmB,KACfH,MAAAA,IAKRjD,QAAQkD,QAAUxC"}